spotbot_profiler.py
---------------------
def create_local_db_objects(local_db_interface):
    logger.debug("creating local db test_profiler_log table")
    local_db_interface.execute("""
        CREATE TABLE IF NOT EXISTS test_profiler_log (
            record_id          INTEGER PRIMARY KEY,
            test_id            INTEGER NOT NULL,
            iteration          INTEGER NOT NULL,
            profiler_name      TEXT NOT NULL,
            log_sequence       INTEGER NOT NULL,
            data_structure     TEXT,
            record_modified_ts TEXT NOT NULL
        )
    """)

spotbot_test.py
-------------------
def create_local_db_objects(local_db_interface):
    logger.debug("creating local db test_log table")
    local_db_interface.execute("""
        CREATE TABLE IF NOT EXISTS test_log (
            record_id          INTEGER PRIMARY KEY,
            test_id            INTEGER NOT NULL,
            iteration          INTEGER,
            message            TEXT,
            data_structure     TEXT,
            record_modified_ts TEXT NOT NULL
        )
    """)

def db_log(self, message, data_structure = None):
---------------------------------------------------
        # encode optional data structure argument to JSON and insert log record to local and farm db
        record_id = None
        data_structure is None else json.dumps(data_structure, indent = 4)

        # local DB
        if self.local_db_interface is None:
            logger.warning("local database connection not established, unable to create local database log record")
        else:
            self.local_db_interface.execute("""
                INSERT INTO test_log (
                    test_id,
                    iteration,
                    message,
                    data_structure,
                    record_modified_ts
                ) VALUES (
                    :test_id,
                    :iteration,
                    :message,
                    :data_structure,
                    :record_modified_ts
                )
            """, {
                "test_id": self.test_id,
                "iteration": self.current_test_iteration,
                "message": message,
                "data_structure": data_structure_json,
                "record_modified_ts": str(datetime.datetime.utcnow())
            })
            logger.debug("created local database test_log record")


test_controller.py
-------------------
        spotbot_profiler.create_local_db_objects(self.local_db_interface)
        spotbot_test.create_local_db_objects(self.local_db_interface)
